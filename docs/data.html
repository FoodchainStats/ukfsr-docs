<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Section 4 Data guide | UK Food Security Report Guidance</title>
  <meta name="description" content="<p>Guidance documentation for the production of the UK Food Security Report.
Contains style guides, publication guidance and miscellaneous infomation
built up from previous UKFSR production experiences.</p>" />
  <meta name="generator" content="bookdown 0.37 and GitBook 2.6.7" />

  <meta property="og:title" content="Section 4 Data guide | UK Food Security Report Guidance" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="<p>Guidance documentation for the production of the UK Food Security Report.
Contains style guides, publication guidance and miscellaneous infomation
built up from previous UKFSR production experiences.</p>" />
  <meta name="github-repo" content="FoodchainStats/ukfsr-docs" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Section 4 Data guide | UK Food Security Report Guidance" />
  
  <meta name="twitter:description" content="<p>Guidance documentation for the production of the UK Food Security Report.
Contains style guides, publication guidance and miscellaneous infomation
built up from previous UKFSR production experiences.</p>" />
  

<meta name="author" content="Food Statistics Team" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="chart.html"/>
<link rel="next" href="theme-guides.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>



<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">UK Food Security Report Guidance</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> url: your book url like https://bookdown.org/yihui/bookdown</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#what-is-this-and-how-do-i-use-it"><i class="fa fa-check"></i><b>1.1</b> What is this and how do I use it?</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#ukfsr-infrastructure"><i class="fa fa-check"></i><b>1.2</b> UKFSR Infrastructure</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#timings-resources-and-pinch-points"><i class="fa fa-check"></i><b>1.3</b> Timings, resources and pinch points</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="text.html"><a href="text.html"><i class="fa fa-check"></i><b>2</b> Text style guide</a>
<ul>
<li class="chapter" data-level="2.1" data-path="text.html"><a href="text.html#formatting-styles"><i class="fa fa-check"></i><b>2.1</b> Formatting styles</a></li>
<li class="chapter" data-level="2.2" data-path="text.html"><a href="text.html#spellingword-choice"><i class="fa fa-check"></i><b>2.2</b> Spelling/Word choice</a></li>
<li class="chapter" data-level="2.3" data-path="text.html"><a href="text.html#sentence-length"><i class="fa fa-check"></i><b>2.3</b> Sentence length</a></li>
<li class="chapter" data-level="2.4" data-path="text.html"><a href="text.html#urls"><i class="fa fa-check"></i><b>2.4</b> URLs/Links</a></li>
<li class="chapter" data-level="2.5" data-path="text.html"><a href="text.html#refs"><i class="fa fa-check"></i><b>2.5</b> References</a></li>
<li class="chapter" data-level="2.6" data-path="text.html"><a href="text.html#acronyms-text"><i class="fa fa-check"></i><b>2.6</b> Acronyms</a></li>
<li class="chapter" data-level="2.7" data-path="text.html"><a href="text.html#labelling-data"><i class="fa fa-check"></i><b>2.7</b> Labelling data</a></li>
<li class="chapter" data-level="2.8" data-path="text.html"><a href="text.html#indicator-section-headings"><i class="fa fa-check"></i><b>2.8</b> Indicator section headings</a></li>
<li class="chapter" data-level="2.9" data-path="text.html"><a href="text.html#the-voice"><i class="fa fa-check"></i><b>2.9</b> The ‘Voice’</a></li>
<li class="chapter" data-level="2.10" data-path="text.html"><a href="text.html#e.g.-i.e.-etc."><i class="fa fa-check"></i><b>2.10</b> e.g. / i.e. / etc.</a></li>
<li class="chapter" data-level="2.11" data-path="text.html"><a href="text.html#symbols"><i class="fa fa-check"></i><b>2.11</b> Symbols</a></li>
<li class="chapter" data-level="2.12" data-path="text.html"><a href="text.html#numbers"><i class="fa fa-check"></i><b>2.12</b> Numbers</a></li>
<li class="chapter" data-level="2.13" data-path="text.html"><a href="text.html#quotation-marks"><i class="fa fa-check"></i><b>2.13</b> Quotation marks:</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="chart.html"><a href="chart.html"><i class="fa fa-check"></i><b>3</b> Chart Style Guide</a>
<ul>
<li class="chapter" data-level="3.1" data-path="chart.html"><a href="chart.html#colours"><i class="fa fa-check"></i><b>3.1</b> Colours</a></li>
<li class="chapter" data-level="3.2" data-path="chart.html"><a href="chart.html#chart-context"><i class="fa fa-check"></i><b>3.2</b> Chart context</a></li>
<li class="chapter" data-level="3.3" data-path="chart.html"><a href="chart.html#resolutionformat"><i class="fa fa-check"></i><b>3.3</b> Resolution/format</a></li>
<li class="chapter" data-level="3.4" data-path="chart.html"><a href="chart.html#helpers"><i class="fa fa-check"></i><b>3.4</b> Helpers</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>4</b> Data guide</a>
<ul>
<li class="chapter" data-level="4.1" data-path="data.html"><a href="data.html#format"><i class="fa fa-check"></i><b>4.1</b> Format</a></li>
<li class="chapter" data-level="4.2" data-path="data.html"><a href="data.html#storage"><i class="fa fa-check"></i><b>4.2</b> Storage</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="data.html"><a href="data.html#access"><i class="fa fa-check"></i><b>4.2.1</b> Access</a></li>
<li class="chapter" data-level="4.2.2" data-path="data.html"><a href="data.html#structure"><i class="fa fa-check"></i><b>4.2.2</b> Structure</a></li>
<li class="chapter" data-level="4.2.3" data-path="data.html"><a href="data.html#file-naming-convention"><i class="fa fa-check"></i><b>4.2.3</b> File naming convention</a></li>
<li class="chapter" data-level="4.2.4" data-path="data.html"><a href="data.html#code"><i class="fa fa-check"></i><b>4.2.4</b> Code</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="theme-guides.html"><a href="theme-guides.html"><i class="fa fa-check"></i><b>5</b> Theme guides</a>
<ul>
<li class="chapter" data-level="5.1" data-path="theme-guides.html"><a href="theme-guides.html#theme-1"><i class="fa fa-check"></i><b>5.1</b> Theme 1</a></li>
<li class="chapter" data-level="5.2" data-path="theme-guides.html"><a href="theme-guides.html#theme-2"><i class="fa fa-check"></i><b>5.2</b> Theme 2</a></li>
<li class="chapter" data-level="5.3" data-path="theme-guides.html"><a href="theme-guides.html#theme-3"><i class="fa fa-check"></i><b>5.3</b> Theme 3</a></li>
<li class="chapter" data-level="5.4" data-path="theme-guides.html"><a href="theme-guides.html#theme-4"><i class="fa fa-check"></i><b>5.4</b> Theme 4</a></li>
<li class="chapter" data-level="5.5" data-path="theme-guides.html"><a href="theme-guides.html#theme-5"><i class="fa fa-check"></i><b>5.5</b> Theme 5</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="web.html"><a href="web.html"><i class="fa fa-check"></i><b>6</b> Web publishing guidance</a>
<ul>
<li class="chapter" data-level="6.1" data-path="web.html"><a href="web.html#overview"><i class="fa fa-check"></i><b>6.1</b> Overview</a></li>
<li class="chapter" data-level="6.2" data-path="web.html"><a href="web.html#graphics"><i class="fa fa-check"></i><b>6.2</b> Graphics</a></li>
<li class="chapter" data-level="6.3" data-path="web.html"><a href="web.html#converting-word-documents-to-markdown"><i class="fa fa-check"></i><b>6.3</b> Converting Word documents to markdown</a></li>
<li class="chapter" data-level="6.4" data-path="web.html"><a href="web.html#logistics"><i class="fa fa-check"></i><b>6.4</b> Logistics</a></li>
<li class="chapter" data-level="6.5" data-path="web.html"><a href="web.html#formatting"><i class="fa fa-check"></i><b>6.5</b> Formatting</a></li>
<li class="chapter" data-level="6.6" data-path="web.html"><a href="web.html#other-useful-things"><i class="fa fa-check"></i><b>6.6</b> Other useful things</a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="web.html"><a href="web.html#acronyms-web"><i class="fa fa-check"></i><b>6.6.1</b> Acronym markdown</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="print.html"><a href="print.html"><i class="fa fa-check"></i><b>7</b> Physical print edition</a>
<ul>
<li class="chapter" data-level="7.1" data-path="print.html"><a href="print.html#final-word-version"><i class="fa fa-check"></i><b>7.1</b> Final Word version</a></li>
<li class="chapter" data-level="7.2" data-path="print.html"><a href="print.html#create-pdf"><i class="fa fa-check"></i><b>7.2</b> Create PDF</a></li>
<li class="chapter" data-level="7.3" data-path="print.html"><a href="print.html#accessibility"><i class="fa fa-check"></i><b>7.3</b> Accessibility</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="miscellaneous.html"><a href="miscellaneous.html"><i class="fa fa-check"></i><b>A</b> Miscellaneous</a>
<ul>
<li class="chapter" data-level="A.1" data-path="miscellaneous.html"><a href="miscellaneous.html#sharepoint-management-practice"><i class="fa fa-check"></i><b>A.1</b> Sharepoint management practice</a></li>
<li class="chapter" data-level="A.2" data-path="miscellaneous.html"><a href="miscellaneous.html#osr-feedback-on-ukfsr2021"><i class="fa fa-check"></i><b>A.2</b> OSR feedback on UKFSR2021</a></li>
<li class="chapter" data-level="A.3" data-path="miscellaneous.html"><a href="miscellaneous.html#general-legal-guidance-from-2024"><i class="fa fa-check"></i><b>A.3</b> General legal guidance from 2024</a>
<ul>
<li class="chapter" data-level="A.3.1" data-path="miscellaneous.html"><a href="miscellaneous.html#legal-basis"><i class="fa fa-check"></i><b>A.3.1</b> Legal basis</a></li>
<li class="chapter" data-level="A.3.2" data-path="miscellaneous.html"><a href="miscellaneous.html#publication-deadline"><i class="fa fa-check"></i><b>A.3.2</b> Publication deadline</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">UK Food Security Report Guidance</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data" class="section level1 hasAnchor" number="4">
<h1><span class="header-section-number">Section 4</span> Data guide<a href="data.html#data" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>How we prepare and organise data.</p>
<div id="format" class="section level2 hasAnchor" number="4.1">
<h2><span class="header-section-number">4.1</span> Format<a href="data.html#format" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The data underlying each chart needs to be stored in csv format. This is so we
can offer a preview link for the data alongside each chart.</p>
<p><strong>GDS Transport font!!</strong></p>
</div>
<div id="storage" class="section level2 hasAnchor" number="4.2">
<h2><span class="header-section-number">4.2</span> Storage<a href="data.html#storage" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Raw data is stored in the Amazon S3 bucket <code>s3-ranch-054</code>. Storage is certified
for sensitive data (although most data should be public domain).</p>
<div id="access" class="section level3 hasAnchor" number="4.2.1">
<h3><span class="header-section-number">4.2.1</span> Access<a href="data.html#access" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The bucket is accessible from across Defra (?)</p>
<pre><code>library(aws.s3)

contents &lt;- get_bucket_df(&quot;s3-ranch-054&quot;)

x &lt;- aws.s3::s3read_using(FUN = readr::read_csv,
                                      bucket = &quot;s3-ranch-054&quot;,
                                      object = &quot;example.csv&quot;)</code></pre>
</div>
<div id="structure" class="section level3 hasAnchor" number="4.2.2">
<h3><span class="header-section-number">4.2.2</span> Structure<a href="data.html#structure" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Here is the current suggested structure for the S3 bucket folders:</p>
<table>
<colgroup>
<col width="7%" />
<col width="7%" />
<col width="7%" />
<col width="8%" />
<col width="67%" />
</colgroup>
<thead>
<tr class="header">
<th>Level 1</th>
<th>Level 2</th>
<th>Level 3</th>
<th>Level 4</th>
<th>Comments</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>theme_X</td>
<td></td>
<td></td>
<td></td>
<td>Top level</td>
</tr>
<tr class="even">
<td></td>
<td>tX_s_n</td>
<td></td>
<td></td>
<td>Indicator section and number (include description?)</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td>data</td>
<td></td>
<td>Raw data in any form can be stored here.</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td>output</td>
<td>graphics</td>
<td>Contains png and svg final graphic files</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td>csv</td>
<td>Contains final csv required to reproduce the graphics in R. In tidy format.</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td>misc</td>
<td></td>
<td>Optional folder to store random files, eg map shapefiles.</td>
</tr>
</tbody>
</table>
</div>
<div id="file-naming-convention" class="section level3 hasAnchor" number="4.2.3">
<h3><span class="header-section-number">4.2.3</span> File naming convention<a href="data.html#file-naming-convention" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>UKFSR content files must adhere to a naming convention. Supplementary files such
as raw data etc can be more fluid, although we recommend includint theme/
indicator numbers. If in doubt, err on the side of long descriptive file names -
its 3 years befoer anyone will look at these again!</p>
<p><strong>Content filename template</strong></p>
<p><code>tX_s_nv_description.svg/png/csv</code></p>
<p>where:</p>
<ul>
<li><p><code>X</code> is theme number</p></li>
<li><p><code>s</code> is section number</p></li>
<li><p><code>n</code> is indicator number</p></li>
<li><p><code>v</code> is indicator variant, eg a,b,c, etc</p></li>
<li><p><code>description</code> needs to be enough to uniquely describe the content. Use <em>snake_case</em> as necessary.</p></li>
<li><p><strong>filetype</strong> must be <code>csv</code> for data, <code>svg</code>/<code>png</code> for web/print respectively</p></li>
</ul>
</div>
<div id="code" class="section level3 hasAnchor" number="4.2.4">
<h3><span class="header-section-number">4.2.4</span> Code<a href="data.html#code" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The S3 bucket is not a public resource (although generally its contents need not be stored securely). But the code to produce the content is stored in a public Github repository at <a href="https://github.com/Defra-Data-Science-Centre-of-Excellence/UKFSR2024">https://github.com/Defra-Data-Science-Centre-of-Excellence/UKFSR2024</a>. It is crucial that the content code for graphics and related output is captured here.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="chart.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="theme-guides.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.docx"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

</body>

</html>
